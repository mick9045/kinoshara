<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<div
	th:replace="layout/body :: body('Movie', 'add_person', ~{ ::content})">
	<div th:fragment="content">
		<link rel="stylesheet" th:href="@{/css/image_wrap.css}">
		<script th:src="@{/scripts/admin/imagePreview.js}"></script>
		<script th:src="@{/scripts/admin/addMovie.js}"></script>

		<div class="container bg-light roudned p-4">
			<!-- Error section for adding  -->
			<div th:if="${result == 'success'}"
				class="alert alert-success col-12" role="alert">Film was
				updated successfully</div>
			<div th:if="${result == 'fail'}" class="alert alert-danger col-12"
				role="alert">There was a problem in updating film</div>
			<!-- !!!!!!!!!!!!!!!!!!!!!!!!!! -->
			<div class="row">
				<h4 class="mb-4 col-12">Update film</h4>
				<form th:action="@{/admin/edit/film/{id}(id=${film.id})}"
					th:object="${film}" method="post" enctype="multipart/form-data" class="col-12">
					<div class="row">
						<div class="col-3">
							<div class="form-group">
								<label for="input-photo">Photo</label>
								<div class="custom-file">
									<input th:field="*{imageSmallPath}" name="posterBig" accept=".jpg,.png" type="file"
										class="custom-file-input" id="input-photo"> 
									<label
										class="custom-file-label" for="input-photo">Choose
										file...</label>
								</div>
							</div>
							<div class="image-wrapper">
								<img id="uploaded-image" th:src="${'/image/bigposter/' + film.getImageSmallPath()}">
							</div>
						</div>
						<div class="col-9">
							<div class="row">
								<div class="form-group col-6">
									<label for="input-title">Title</label> <input required
										minlength="2" maxlength="60" name="title" type="text"
										class="form-control" id="input-firstname"
										aria-describedby="emailHelp" placeholder="Enter firtname"
										th:field="*{title}">
								</div>
								<div class="form-group col-6">
									<label for="input-title">Release date</label> <input
										name="releaseDate" type="date" min="1895-12-28"
										class="form-control" id="input-release-date"
										aria-describedby="emailHelp" placeholder="Enter release date"
										th:field="*{releaseDate}">
								</div>
								<div class="form-group col-4">
									<label for="input-title">Length</label> <input required
										minlength="2" maxlength="60" name="filmLength" type="number"
										class="form-control" id="input-length"
										aria-describedby="emailHelp" placeholder="Enter length"
										th:field="*{filmLength}">
								</div>
								<div class="form-group col-4">
									<label for="input-title">Rating</label> <input min="1" max="10"
										name="rating" type="number" step="0.1" class="form-control"
										id="input-rating" aria-describedby="emailHelp"
										placeholder="Enter rating"
										th:field="*{rating}">
										
								</div>
								<div class="form-group col-4">
									<label for="input-title">Views count</label> <input min="0"
										name="views" type="number" class="form-control"
										id="input-views-count" aria-describedby="emailHelp"
										placeholder="Enter views count"
										th:field="*{views}">
								</div>
								<div class="form-group col-6">
									<label for="input-country">Countries</label> <select multiple
										id="input-country" class="selectpicker"
										data-style="custom-select" data-live-search="true"
										data-width="100%" name="countries">
											<option th:if="${countries != null}"
											th:each="country : ${countries}"
											th:name="country" th:value="${country.id}"
												th:text="${country.name}"
												th:selected="${film.getCountries().contains(country)}">
											<option>
									</select>
								</div>

								<div class="form-group col-6">
									<label for="input-country">Genres</label> 
									<select
										id="input-genre" class="selectpicker"
										data-style="custom-select" data-width="100%"
										data-live-search="true" name="genres" multiple>
										<option th:if="${genres != null}" th:each="genre : ${genres}"
											th:name="genre" th:value="${genre.id}"
											th:text="${genre.name}"
											th:selected="${film.getGenres().contains(genre)}">
										</option>
									</select>
								</div>

								<div class="form-group col-6">
									<label for="input-country">Actors</label> 
									<select
										id="input-added-actors" class="form-control" name="actors"
										size="8">
										<option th:if="${film.actors != null}" th:each="actor : ${film.actors}"
											th:name="actor" th:value="${film.getActors()}"
											th:text="${actor.firstName + ' ' + actor.lastName}">
										</option>
									</select>
									<button id="button-remove-added-actor"
										class="btn btn-danger my-4" type="button">Remove</button>
								</div>
								<div class="form-group col-6">
									<label for="input-country">Actors</label>
									<div class="input-group mb-2">
										<input class="form-control" id="input-search-actors"
											placeholder="Search" aria-label="Search">
										<div class="input-group-append">
											<button id="button-search-actors"
												class="btn btn-primary octicon octicon-search" type="button"></button>
										</div>
									</div>
									<select multiple id="input-all-actors" class="form-control"
										name="actors" size="6">
									</select>
									<button id="button-add-actor" type="button"
										class="btn btn-success my-4">Add</button>
								</div>

								<div class="form-group col-6">
									<label for="input-country">Directors</label> <select
										id="input-added-directors" class="form-control"
										name="directors" size="8">
										<option th:if="${film.directors != null}" th:each="director : ${film.directors}"
											th:name="director" th:value="${film.getDirectors()}"
											th:text="${director.firstName + ' ' + director.lastName}">
										</option>
									</select>
									<button type="button" id="button-remove-added-director"
										class="btn btn-danger my-4">Remove</button>
								</div>
								<div class="form-group col-6">
									<label for="input-country">Search Directors</label>
									<div class="input-group mb-2">
										<input class="form-control" id="input-search-directors"
											placeholder="Search" aria-label="Search">
										<div class="input-group-append">
											<button id="button-search-directors" type="button"
												class="btn btn-primary octicon octicon-search"></button>
										</div>
									</div>
									<select multiple id="input-all-directors" class="form-control"
										name="actors" size="6">
									</select>
									<button type="button" id="button-add-director"
										class="btn btn-success my-4">Add</button>
								</div>
								<div class="col-12" style="text-align: center">
									<input class="btn btn-primary btn-lg" type="submit"
										id="submit-movie-button" value="Send">
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>

		</div>

	</div>
</div>
</html>